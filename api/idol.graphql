query getIdolList {
  idol {
    id
    name
    title
    type
    role
    user_id
    skills(order_by: { index: asc }) {
      id
      name
      index
      type
      level
      trigger
      trigger_value
      ct
      user_id
      abilities {
        id
        type
        target
        amount
        span
        condition
        condition_value
        user_id
        enhance
        enhance_value
      }
    }
  }
}

query getIdol($id: uuid!) {
  idol_by_pk(id: $id) {
    id
    name
    title
    type
    role
    user_id
    skills(order_by: { index: asc }) {
      id
      name
      index
      type
      level
      trigger
      trigger_value
      ct
      user_id
      abilities {
        id
        type
        target
        amount
        span
        condition
        condition_value
        user_id
        enhance
        enhance_value
      }
    }
  }
}

mutation createIdol($object: idol_insert_input!) {
  insert_idol_one(object: $object) {
    id
    name
    title
    type
    role
    skills(order_by: { index: asc }) {
      id
      name
      index
      type
      level
      trigger
      trigger_value
      ct
      abilities {
        id
        type
        target
        amount
        span
        condition
        condition_value
        enhance
        enhance_value
      }
    }
  }
}

mutation updateIdol($object: idol_insert_input!, $delete_ability_ids: [uuid!]!) {
  delete_ability(where: { id: { _in: $delete_ability_ids } }) {
    affected_rows
  }
  insert_idol_one(object: $object, on_conflict: { constraint: idol_pkey, update_columns: [name, title, type, role] }) {
    id
    name
    title
    type
    role
    skills(order_by: { index: asc }) {
      id
      name
      index
      type
      level
      trigger
      trigger_value
      ct
      abilities {
        id
        type
        target
        amount
        span
        condition
        condition_value
        enhance
        enhance_value
      }
    }
  }
}
